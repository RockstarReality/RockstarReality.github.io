<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Password Generator v3</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
/* Basic layout */
body {
    margin:0;
    padding:0;
    font-family: "Courier New", monospace;
    background:#0b0f14;
    color:#f5c518;
    display:flex;
    justify-content:center;
    align-items:flex-start;
    padding:20px;
}
body.light {
    background:#f0f0f0;
    color:#222;
}
.container {
    width:100%;
    max-width:700px;
    background:#111823;
    border-radius:10px;
    padding:20px;
    box-shadow:0 0 20px rgba(245,197,24,0.15);
}
body.light .container {
    background:#fff;
    color:#222;
    box-shadow:0 0 20px rgba(0,0,0,0.15);
}
h1{text-align:center;margin-bottom:5px;}
.subtitle{text-align:center;color:#9fb3c8;margin-bottom:15px;}
body.light .subtitle{color:#555;}
label{font-weight:bold; display:block; margin-top:10px;}
input, select, button{
    padding:10px;
    margin:5px 0;
    background:#0b0f14;
    color:#f5c518;
    border:1px solid #2a3547;
    border-radius:5px;
    font-family:inherit;
}
body.light input, body.light select, body.light button{
    background:#eee;
    color:#222;
    border:1px solid #ccc;
}
button{
    background:#f5c518;
    color:#000;
    font-weight:bold;
    cursor:pointer;
}
button:hover{background:#ffd84d;}
.checkbox-group{
    display:flex;
    flex-wrap:wrap;
    gap:10px;
    margin-top:5px;
}
.checkbox-group label{
    font-weight:normal;
    display:flex;
    align-items:center;
    gap:5px;
}
#output{
    background:#000;
    padding:15px;
    margin-top:15px;
    border-radius:5px;
    word-break:break-all;
    font-size:18px;
    border:1px solid #2a3547;
    display:flex;
    justify-content:space-between;
    align-items:center;
    position:relative;
}
body.light #output{
    background:#eee;
    border:1px solid #ccc;
    color:#222;
}
#strengthText{
    text-align:center;
    margin-top:5px;
    font-weight:bold;
}
.readme{
    background:#111823;
    border:1px solid #2a3547;
    padding:15px;
    border-radius:5px;
    margin-top:20px;
    color:#9fb3c8;
}
body.light .readme{
    background:#fff;
    border:1px solid #ccc;
    color:#555;
}
.popup{
    position:fixed; top:0; left:0;
    width:100%; height:100%;
    background: rgba(0,0,0,0.85);
    color:#f5c518;
    display:flex;
    justify-content:center;
    align-items:center;
    z-index:999;
    font-family:monospace;
    text-align:center;
    padding:20px;
}
.popup-content{
    background:#111823;
    padding:20px;
    border-radius:10px;
    max-width:600px;
}
.popup button{
    margin-top:15px;
    cursor:pointer;
}
.copyBtn{
    padding:5px 10px;
    font-size:14px;
    cursor:pointer;
    margin-left:10px;
}
.theme-toggle{
    float:right;
    margin-bottom:10px;
    cursor:pointer;
}

/* Mobile friendly adjustments */
@media(max-width:600px){
    .checkbox-group{
        flex-direction:column;
    }
    #output{
        flex-direction:column;
        align-items:flex-start;
    }
}
</style>
</head>
<body>

<div class="container">
    <div class="theme-toggle"><button onclick="toggleTheme()">Toggle Dark/Light</button></div>
    <h1>üõ°Ô∏è Password Generator v3</h1>
    <div class="subtitle">$whoami ‚Üí offline / local / secure</div>

    <label>Seed Text (optional)</label>
    <input id="seed" placeholder="Type a sentence, name, or secret phrase">

    <label>Security Level</label>
    <select id="level">
        <option value="1">Level 1 ‚Äì Simple (8)</option>
        <option value="2">Level 2 ‚Äì Strong (16)</option>
        <option value="3">Level 3 ‚Äì Very Strong (20)</option>
        <option value="4">Level 4 ‚Äì Max Hard (25‚Äì30)</option>
        <option value="5">Level 5 ‚Äì Ultra Random (8‚Äì96)</option>
    </select>

    <label>Custom Lengths (optional)</label>
    <div style="display:flex;gap:10px;">
        <input type="number" id="minLength" placeholder="Min length" style="flex:1;">
        <input type="number" id="maxLength" placeholder="Max length" style="flex:1;">
    </div>

    <label>Transformations</label>
    <div class="checkbox-group">
        <label><input type="checkbox" id="camel"> camelCase</label>
        <label><input type="checkbox" id="snake"> snake_case</label>
        <label><input type="checkbox" id="kebab"> kebab-case</label>
        <label><input type="checkbox" id="leet"> 1337 substitutions</label>
        <label><input type="checkbox" id="symbolMap"> Symbol mapping (!=@$%)</label>
        <label><input type="checkbox" id="scrambleSwitch"> Total Random Scramble</label>
    </div>

    <button onclick="generate()">Generate Password</button>

    <div id="output"></div>
    <div id="strengthText"></div>

    <div class="readme">
        <h3>README & Instructions</h3>
        <ol>
            <li>Save this file locally as <strong>password_generator.html</strong></li>
            <li>Open it in your browser ‚Äî runs entirely offline.</li>
            <li>Use a memorable phrase + transformations to generate strong passwords.</li>
            <li>By default, your seed phrase is preserved; enable scramble for full randomization.</li>
            <li>Combine transformations for maximum strength.</li>
            <li>Custom min/max lengths override level defaults (validated automatically).</li>
            <li>Extra random symbols added at start/end keep repeated generations fresh.</li>
            <li>Never trust online password generators for sensitive passwords.</li>
        </ol>
    </div>
</div>

<div id="popup" class="popup" style="display:none;">
    <div class="popup-content">
        <h2>üõà Welcome!</h2>
        <p>Before using this password generator, read the README section below. This ensures you understand how to safely save and use it locally.</p>
        <button onclick="closePopup()">I Understand</button>
    </div>
</div>

<script>
// --- Popup per session ---
if(!sessionStorage.getItem("pwgenPopupShown")){
    document.getElementById("popup").style.display = "flex";
    sessionStorage.setItem("pwgenPopupShown","true");
}
function closePopup(){document.getElementById("popup").style.display="none";}

// --- Theme toggle ---
function toggleTheme(){document.body.classList.toggle("light");}

// --- Random helpers ---
function randomInt(min,max){return Math.floor(Math.random()*(max-min+1))+min;}
function randomChar(){ 
    const chars="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*()_+-=[]{}<>?";
    return chars.charAt(Math.floor(Math.random()*chars.length));
}

// --- Transformations ---
function leetify(str){return str.replace(/[aAeEiIoOsStTlLbB]/g,c=>({a:'4',A:'4',e:'3',E:'3',i:'1',I:'1',o:'0',O:'0',s:'$',S:'$',t:'7',T:'7',l:'1',L:'1',b:'8',B:'8'}[c]));}
function symbolMap(str){return str.replace(/[aAiIsSoO]/g,c=>({a:'@',A:'@',i:'!',I:'!',s:'$',S:'$',o:'0',O:'0'}[c]));}
function camelCase(str){return str.split(/\s+/).map((w,i)=>i===0?w.toLowerCase():w.charAt(0).toUpperCase()+w.slice(1).toLowerCase()).join('');}
function snakeCase(str){return str.split(/\s+/).map(w=>w.toLowerCase()).join('_');}
function kebabCase(str){return str.split(/\s+/).map(w=>w.toLowerCase()).join('-');}

// --- Password Strength ---
function checkStrength(pw){
    let score=0;
    if(pw.length>=8) score++;
    if(pw.length>=12) score++;
    if(pw.match(/[a-z]/)) score++;
    if(pw.match(/[A-Z]/)) score++;
    if(pw.match(/[0-9]/)) score++;
    if(pw.match(/[^a-zA-Z0-9]/)) score++;
    let text="";
    if(score<=2) text="Very Weak";
    else if(score==3) text="Weak";
    else if(score==4) text="Moderate";
    else if(score==5) text="Strong";
    else text="Very Strong";
    document.getElementById("strengthText").textContent=text;
}

// --- Generate ---
function generate(){
    let seed=document.getElementById("seed").value;

    // --- Transformations ---
    if(document.getElementById("camel").checked) seed=camelCase(seed);
    if(document.getElementById("snake").checked) seed=snakeCase(seed);
    if(document.getElementById("kebab").checked) seed=kebabCase(seed);
    if(document.getElementById("leet").checked) seed=leetify(seed);
    if(document.getElementById("symbolMap").checked) seed=symbolMap(seed);

    // --- Length ---
    let level=parseInt(document.getElementById("level").value);
    let length;
    if(level===1) length=8;
    else if(level===2) length=16;
    else if(level===3) length=20;
    else if(level===4) length=randomInt(25,30);
    else if(level===5) length=randomInt(8,96);
    else length=16;

    const minInput=parseInt(document.getElementById("minLength").value);
    const maxInput=parseInt(document.getElementById("maxLength").value);
    if(!isNaN(minInput) && !isNaN(maxInput) && minInput>0 && maxInput>=minInput){
        length=randomInt(minInput,maxInput);
    }

    // --- Remove spaces ---
    let password=seed.replace(/\s+/g,'');

    // --- Extra random padding ---
    let extraStart='', extraEnd='';
    const padCount=randomInt(0,3);
    for(let i=0;i<padCount;i++){
        if(Math.random()<0.5) extraStart+=randomChar();
        else extraEnd+=randomChar();
    }
    password=extraStart+password+extraEnd;

    // --- Fill remaining length ---
    while(password.length<length) password+=randomChar();

    // --- Scramble toggle ---
    if(document.getElementById("scrambleSwitch").checked){
        password=password.split('').sort(()=>Math.random()-0.5).join('');
    }

    document.getElementById("output").innerHTML = password +
        ' <button class="copyBtn" onclick="copyPassword()">Copy</button>';
    checkStrength(password);
}

// --- Copy ---
function copyPassword(){
    const text=document.getElementById("output").textContent;
    navigator.clipboard.writeText(text).then(()=>alert("Password copied!"));
}

// --- Keyboard shortcuts ---
document.addEventListener("keydown", function(e){
    if(e.key==="Enter") generate();
    if(e.ctrlKey && e.key.toLowerCase()==="c") copyPassword();
});
</script>

</body>
</html>
